:root {
  --theme: #ffffff;
  --entry: #f6f8fa;
  --primary: #24292f;
  --secondary: #57606a;
  --tertiary: #d8dee4;
  --content: #24292f;
  --code-block-bg: #eef2f6;
  --code-bg: #eef2f6;
  --border: #c9d1d9;
}

:root[data-theme="dark"] {
  --theme: #0d1117;
  --entry: #161b22;
  --primary: #c9d1d9;
  --secondary: #8b949e;
  --tertiary: #30363d;
  --content: #c9d1d9;
  --code-block-bg: #161b22;
  --code-bg: #0d1117;
  --border: #30363d;
}

.post-content a,
.toc a,
.post-tags a {
  color: #0a58ca;
}

:root[data-theme="dark"] .post-content a,
:root[data-theme="dark"] .toc a,
:root[data-theme="dark"] .post-tags a {
  color: #2f81f7;
}

/* Profile buttons: improve contrast in light mode */
:root .profile .buttons a,
:root .profile .buttons .button {
  background: #ffffff;
  border: 1px solid var(--border);
  color: var(--primary);
  pointer-events: auto;
  cursor: pointer;
}

:root .profile .buttons a:hover,
:root .profile .buttons .button:hover {
  background: #eef2f6;
  border-color: #c5ccd3;
}

/* Profile buttons: improve contrast in dark mode */
:root[data-theme="dark"] .profile .buttons a,
:root[data-theme="dark"] .profile .buttons .button {
  background: #0f141b;
  border: 1px solid var(--border);
  color: #e6edf3;
}

:root[data-theme="dark"] .profile .buttons a:hover,
:root[data-theme="dark"] .profile .buttons .button:hover {
  background: #161b22;
  border-color: #3a4048;
}

code,
pre,
div.highlight {
  border-color: var(--border);
}

.chroma {
  background-color: unset;
}

div.highlight {
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: auto;
}

.chroma,
.chroma code {
  color: #24292f;
}

/* Stronger token colors for light mode */
.chroma .k,
.chroma .kd,
.chroma .kn,
.chroma .kp,
.chroma .kr,
.chroma .kt {
  color: #d1242f;
}

.chroma .s,
.chroma .s1,
.chroma .s2,
.chroma .sa,
.chroma .sb,
.chroma .sc,
.chroma .dl,
.chroma .sd,
.chroma .se,
.chroma .sh,
.chroma .si,
.chroma .sx {
  color: #0a3069;
}

.chroma .c,
.chroma .c1,
.chroma .cm,
.chroma .cp,
.chroma .cs,
.chroma .ch {
  color: #6e7781;
}

.chroma .nf,
.chroma .nc,
.chroma .nt,
.chroma .na {
  color: #0550ae;
}

.chroma .mi,
.chroma .mf,
.chroma .mh,
.chroma .il,
.chroma .mo {
  color: #953800;
}

.chroma .lnt {
  color: #4b5563;
}

.chroma .hl {
  background: rgba(9, 105, 218, 0.12);
}

:root[data-theme="dark"] .chroma .hl {
  background: rgba(47, 129, 247, 0.15);
}

/* Emoji rendering: align with PaperMod emoji support guide */
.emoji {
  font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji",
    "Segoe UI Symbol", "Android Emoji", "EmojiSymbols", sans-serif;
  font-size: 1em;
  line-height: 1;
}

/* Scientific reading polish */
.post-content h2,
.post-content h3,
.post-content h4 {
  letter-spacing: 0.01em;
}

.post-content table {
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: hidden;
}

.post-content table th {
  background: #eef2f6;
}

:root[data-theme="dark"] .post-content table th {
  background: #0f141b;
}

.post-content blockquote {
  border-inline-start: 4px solid #0a58ca;
  background: #f6f8fa;
}

:root[data-theme="dark"] .post-content blockquote {
  border-inline-start-color: #2f81f7;
  background: #161b22;
}

.katex-display {
  margin: 1em 0;
  overflow-x: auto;
}

.katex {
  font-size: 1.02em;
}

/* 404 page */
.not-found-page {
  display: grid;
  place-items: center;
  min-height: 60vh;
}

.not-found-card {
  max-width: 640px;
  padding: 32px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--entry);
  text-align: center;
}

.not-found-code {
  font-size: 56px;
  font-weight: 700;
  color: var(--secondary);
}

.not-found-title {
  margin-top: 8px;
  margin-bottom: 8px;
  font-size: 28px;
}

.not-found-text {
  color: var(--secondary);
  margin-bottom: 20px;
}

.not-found-actions {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
}

.nf-btn {
  display: inline-block;
  padding: 10px 14px;
  border-radius: 8px;
  background: #0a58ca;
  color: #ffffff;
  border: 1px solid #0a58ca;
}

.nf-btn:hover {
  background: #0b5ed7;
  border-color: #0b5ed7;
}

.nf-btn-outline {
  background: transparent;
  color: var(--primary);
  border-color: var(--border);
}

.nf-btn-outline:hover {
  background: #eef2f6;
  border-color: #c5ccd3;
}

:root[data-theme="dark"] .nf-btn-outline:hover {
  background: #161b22;
  border-color: #3a4048;
}

/* UX improvements */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

.post-content {
  line-height: 1.75;
}

/* Heading anchor link visibility */
.post-content .anchor {
  opacity: 0;
  margin-left: 6px;
  text-decoration: none;
  transition: opacity 120ms ease;
}

.post-content h1:hover .anchor,
.post-content h2:hover .anchor,
.post-content h3:hover .anchor,
.post-content h4:hover .anchor,
.post-content h5:hover .anchor,
.post-content h6:hover .anchor {
  opacity: 1;
}

a:focus-visible,
button:focus-visible,
input:focus-visible,
textarea:focus-visible {
  outline: 2px solid #0a58ca;
  outline-offset: 2px;
}

:root[data-theme="dark"] a:focus-visible,
:root[data-theme="dark"] button:focus-visible,
:root[data-theme="dark"] input:focus-visible,
:root[data-theme="dark"] textarea:focus-visible {
  outline-color: #2f81f7;
}

.reading-progress {
  position: fixed;
  top: 0;
  left: 0;
  height: 3px;
  width: 100%;
  background: #0a58ca;
  transform: scaleX(0);
  transform-origin: left center;
  z-index: 1000;
}

:root[data-theme="dark"] .reading-progress {
  background: #2f81f7;
}

/* UI polish: header/nav */
.nav {
  gap: 12px;
  flex-wrap: nowrap;
}

.header {
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: saturate(140%) blur(10px);
  background: color-mix(in srgb, var(--theme) 92%, transparent);
  border-bottom: 1px solid var(--border);
}

.nav {
  align-items: center;
}

.logo a {
  letter-spacing: 0.2px;
}

.logo a {
  font-weight: 700;
}

/* Logo badge */
.logo a {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #ffffff;
  font-weight: 700;
}

:root[data-theme="dark"] .logo a {
  background: #161b22;
}

.header .nav {
  padding-block: 8px;
}

.logo {
  gap: 10px;
}

.logo a {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

:root[data-theme="dark"] .logo a {
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.35);
}

#menu a {
  font-weight: 500;
}

#menu a:hover,
#menu .active {
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.06);
}

:root[data-theme="dark"] #menu a:hover,
:root[data-theme="dark"] #menu .active {
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.35);
}

#menu a[title="Shop"],
#menu a[title="Tìm kiếm (Alt + /)"] {
  box-shadow: none;
}

.logo-switches {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-inline-start: 8px;
  padding-inline-start: 8px;
  border-inline-start: 1px solid var(--border);
}

#theme-toggle {
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid var(--border);
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

#theme-toggle:hover {
  background: #eef2f6;
}

:root[data-theme="dark"] #theme-toggle:hover {
  background: #161b22;
}

#theme-toggle::after {
  position: absolute;
  bottom: -4px;
  right: -4px;
  font-size: 10px;
  line-height: 1;
  padding: 2px 4px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--entry);
  color: var(--secondary);
  content: "";
}

#theme-toggle[data-mode="auto"]::after {
  content: "A";
}

#theme-toggle[data-mode="light"]::after {
  content: "L";
}

#theme-toggle[data-mode="dark"]::after {
  content: "D";
}

#theme-toggle svg {
  width: 18px;
  height: 18px;
  display: block;
}

#menu a {
  padding: 6px 8px;
  border-radius: 8px;
}

#menu {
  flex-wrap: nowrap;
  overflow-x: auto;
  scrollbar-width: none;
}

#menu::-webkit-scrollbar {
  display: none;
}

#menu a:hover,
#menu .active {
  background: #eef2f6;
}

:root[data-theme="dark"] #menu a:hover,
:root[data-theme="dark"] #menu .active {
  background: #161b22;
}

/* Search menu revert to text */
#menu a[title="Tìm kiếm (Alt + /)"] {
  width: auto;
  height: auto;
  border-radius: 8px;
  padding: 6px 8px;
}

#menu a[title="Tìm kiếm (Alt + /)"] span {
  display: inline;
}

#menu a[title="Tìm kiếm (Alt + /)"]::before {
  content: none;
}

/* Shop menu as icon-like button */
/* Shop menu back to text */
#menu a[title="Shop"] {
  width: auto;
  height: auto;
  padding: 6px 8px;
  border-radius: 8px;
}

/* UI polish: post list cards */
.post-entry {
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--entry);
  transition: transform 120ms ease, box-shadow 120ms ease;
}

.post-entry:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
}

:root[data-theme="dark"] .post-entry:hover {
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
}

.post-entry .entry-content {
  color: var(--secondary);
}

/* Profile page polish */
.profile {
  padding: 28px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--entry);
}

.profile .profile_inner {
  gap: 16px;
}

.profile .profile_inner h1 {
  font-size: 32px;
  letter-spacing: 0.2px;
}

.profile .profile_inner h2 {
  color: var(--secondary);
  font-weight: 500;
}

.profile .social-icons {
  margin-top: 6px;
}

.profile .buttons {
  margin-top: 18px;
}

/* Terms (tags/categories) grouped layout */
.terms-groups {
  display: grid;
  gap: 18px;
}

.terms-group {
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--entry);
  padding: 14px 16px;
}

.terms-letter {
  font-size: 18px;
  margin-bottom: 10px;
  color: var(--secondary);
}

.terms-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.terms-tags a {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: #ffffff;
  color: var(--primary);
}

.terms-tags a:hover {
  background: #eef2f6;
}

:root[data-theme="dark"] .terms-tags a {
  background: #161b22;
}

:root[data-theme="dark"] .terms-tags a:hover {
  background: #1f242b;
}

/* Archive tags */
.archive-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}

.archive-tag {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: var(--entry);
  color: var(--secondary);
  font-size: 12px;
}

.archive-tag:hover {
  background: #eef2f6;
  color: var(--primary);
}

:root[data-theme="dark"] .archive-tag:hover {
  background: #1f242b;
}
